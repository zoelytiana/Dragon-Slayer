<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Module 1 JavaScript : Dragon Slayer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css?family=Germania+One" rel="stylesheet">
    <link rel="stylesheet" href="css/dragon-slayer.css">

    <!-- Fonctions utilitaires -->
    <script src="js/utilities.js"></script>
    <script src="js/calculejeu.js"></script>

</head>
<body>
<header>
<script>   
    let jeu = {};
    jeu = initializeGame(); //Initialisation
    //document.write("Valeur Initiale :");
    //affiche(jeu);
</script>

    <h1>Dragon slayer</h1>
    <p>Le dernier combat javaScript du Module 1</p>
</header>
<main>
    <div class="game">
        <h2>Que la fête commence !!</h2>

        <!-- Etat du jeu -->
        <div class="game-state">
            <figure class="game-state_player">
                <img src="images/knight.png" alt="Chevalier">
                <figcaption><script>jeu.HPDragon</script></figcaption>
            </figure>
            <figure class="game-state_player">
                <img src="images/dragon.png" alt="Dragon">
                <figcaption><script>jeu.HPPlayer</script></figcaption>
            </figure>
        </div>


        <!-- Journal de la partie - TOUR N°1 -->
        <script>
            //on commence le tour par le numéro 1
            let tour = 0; 
            document.write("On commence le jeux");
            do
            {
                tour++;
                document.write("<h3>Tour n°"+tour+"</h3>");

                //Initiative
                //let heros = throwDices(10, 6);
                //let dragon = throwDices(10, 6);
                let initiat = {};
                initiat = initiative(); //prendre l'Initiative
                document.write("Initiative :");
                affiche(initiat);
            
                //calcule du dommage en jeu normale
                let dommage=damages(); 
                //document.write("Taux de dommage :");
                //affiche(dommage);

                //si le heros a l'initiative supérieur
                if (initiat.HPPlayer > initiat.HPDragon){
                    //on enlève de point au dragon
                    jeu.HPDragon -= dommage.HPDragon;
                    afficheEnlevePointDragon(dommage);
                    //pvDragon =  pvDragon - dommage; 
                }
                else {
                    //on enlève de point au heros
                    jeu.HPPlayer -= dommage.HPPlayer;
                    afficheEnlevePointPlayer(dommage);
                }

                document.write("Point de jeux:");
                afficheJeu(jeu);

            } while(jeu.HPDragon>0 && jeu.HPPlayer>0);
        </script>
        
        <footer>
            <h3>Fin de la partie</h3>
            <figure class="game-end"></figure>
            <script>
            if (jeu.HPDragon>0){
                document.write('<figcaption>Vous avez perdu le combat, le dragon vous a carbonisé !</figcaption>');
                document.write('<img src="images/dragon-winner.png" alt="Dragon vainqueur">');
            }
            else{
                document.write('<figcaption>Vous avez gagné le combat, le dragon est carbonisé !</figcaption>');
                document.write('<img src="images/dragon-winner.png" alt="Dragon vainqueur">');  
            }</script>       
            </figure>
        </footer>
    </div>
</main>
<img src="images/cloud1.png" alt="" id="cloud1" class="cloud">
<img src="images/cloud2.png" alt="" id="cloud2" class="cloud">
</body>
</html>
